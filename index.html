<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kho H·ªôi Tho·∫°i Song Ng·ªØ</title>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }
      
      body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background-color: #f5f5f5;
          color: #333;
      }
      
      .container {
          max-width: 1400px;
          margin: 0 auto;
          padding: 20px;
      }
      
      header {
          background-color: #2c3e50;
          color: white;
          padding: 20px 0;
          margin-bottom: 30px;
      }
      
      h1 {
          text-align: center;
      }
      
      .controls {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          margin-bottom: 20px;
      }
      
      .search-box {
          width: 100%;
          padding: 12px;
          font-size: 16px;
          border: 2px solid #ddd;
          border-radius: 4px;
          margin-bottom: 15px;
      }
      
      .filters {
          display: flex;
          gap: 15px;
          flex-wrap: wrap;
          align-items: center;
      }
      
      .topic-tabs {
          display: flex;
          gap: 10px;
          margin-bottom: 15px;
      }
      
      .topic-tab {
          padding: 10px 20px;
          border: 2px solid #3498db;
          background: white;
          color: #3498db;
          border-radius: 25px;
          cursor: pointer;
          transition: all 0.3s;
          font-weight: bold;
      }
      
      .topic-tab.active {
          background: #3498db;
          color: white;
      }
      
      .topic-tab:hover {
          background: #2980b9;
          color: white;
          border-color: #2980b9;
      }
      
      select {
          padding: 8px 12px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
      }
      
      .add-btn {
          background-color: #27ae60;
          color: white;
          padding: 10px 20px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
          margin-left: auto;
      }
      
      .add-btn:hover {
          background-color: #229954;
      }
      
      .topic-section {
          margin-bottom: 40px;
      }
      
      .topic-header {
          display: flex;
          align-items: center;
          margin-bottom: 20px;
          padding: 15px 20px;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border-radius: 8px;
          box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      }
      
      .topic-title {
          font-size: 24px;
          font-weight: bold;
          margin-right: 15px;
      }
      
      .topic-count {
          background: rgba(255,255,255,0.2);
          padding: 5px 12px;
          border-radius: 15px;
          font-size: 14px;
      }
      
      .conversations-list {
          display: flex;
          flex-direction: column;
          gap: 15px;
      }
      
      .conversation-card {
          background: white;
          border-radius: 12px;
          padding: 25px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          transition: all 0.3s;
          border-left: 5px solid #3498db;
      }
      
      .conversation-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      }
      
      .card-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
      }
      
      .card-title {
          font-size: 20px;
          font-weight: bold;
          color: #2c3e50;
      }
      
      .level-badge {
          background-color: #f39c12;
          color: white;
          padding: 6px 15px;
          border-radius: 20px;
          font-size: 13px;
          font-weight: bold;
      }
      
      .level-beginner { background-color: #27ae60; }
      .level-intermediate { background-color: #f39c12; }
      .level-advanced { background-color: #e74c3c; }
      
      .characters {
          display: flex;
          justify-content: center;
          gap: 50px;
          margin-bottom: 20px;
          padding: 15px;
          background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
          border-radius: 8px;
      }
      
      .character {
          text-align: center;
          font-weight: bold;
          color: #2c3e50;
          font-size: 16px;
      }
      
      .character-a {
          color: #3498db;
      }
      
      .character-b {
          color: #e74c3c;
      }
      
      .dialogue-container {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
          gap: 15px;
          max-height: none;
      }
      
      .dialogue-line {
          padding: 15px;
          border-radius: 12px;
          position: relative;
          margin-bottom: 10px;
      }
      
      .dialogue-a {
          background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
          border-left: 4px solid #3498db;
      }
      
      .dialogue-b {
          background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
          border-left: 4px solid #e74c3c;
      }
      
      .speaker-name {
          font-weight: bold;
          font-size: 15px;
          margin-bottom: 8px;
          display: flex;
          align-items: center;
      }
      
      .speaker-a {
          color: #2980b9;
      }
      
      .speaker-b {
          color: #c0392b;
      }
      
      .dialogue-content {
          display: flex;
          flex-direction: column;
          gap: 8px;
      }
      
      .lang-text {
          padding: 10px 12px;
          border-radius: 8px;
          line-height: 1.5;
          font-size: 15px;
      }
      
      .english-text {
          background-color: rgba(255,255,255,0.8);
          border: 1px solid rgba(0,0,0,0.1);
          font-weight: 500;
      }
      
      .vietnamese-text {
          background-color: rgba(255,255,255,0.6);
          border: 1px solid rgba(0,0,0,0.1);
          font-style: italic;
          color: #555;
      }
      
      .modal {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0,0,0,0.5);
          z-index: 1000;
      }
      
      .modal-content {
          background: white;
          width: 90%;
          max-width: 700px;
          margin: 30px auto;
          padding: 30px;
          border-radius: 8px;
          position: relative;
          max-height: 90vh;
          overflow-y: auto;
      }
      
      .close-btn {
          position: absolute;
          top: 10px;
          right: 15px;
          font-size: 28px;
          cursor: pointer;
          color: #999;
      }
      
      .form-group {
          margin-bottom: 20px;
      }
      
      .form-group label {
          display: block;
          margin-bottom: 5px;
          font-weight: bold;
      }
      
      .form-group input, .form-group textarea, .form-group select {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
      }
      
      .character-names {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 15px;
      }
      
      .dialogue-input {
          border: 1px solid #ddd;
          border-radius: 4px;
          padding: 15px;
          margin-bottom: 15px;
      }
      
      .dialogue-inputs {
          max-height: 300px;
          overflow-y: auto;
          border: 1px solid #ddd;
          border-radius: 4px;
          padding: 15px;
          margin-bottom: 15px;
      }
      
      .add-dialogue-btn {
          background-color: #27ae60;
          color: white;
          padding: 8px 15px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          margin-bottom: 10px;
      }
      
      .remove-dialogue-btn {
          background-color: #e74c3c;
          color: white;
          padding: 4px 8px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
          float: right;
      }
      
      .speaker-select {
          width: 100px;
          margin-bottom: 10px;
      }
      
      .dialogue-texts {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 10px;
      }
      
      .submit-btn {
          background-color: #27ae60;
          color: white;
          padding: 12px 30px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
          width: 100%;
      }
      
      .submit-btn:hover {
          background-color: #229954;
      }
      
      .hidden {
          display: none !important;
      }
      
      .empty-state {
          text-align: center;
          padding: 40px;
          color: #7f8c8d;
          font-style: italic;
      }
  </style>
</head>
<body>
  <header>
      <div class="container">
          <h1>üìö Kho H·ªôi Tho·∫°i Song Ng·ªØ</h1>
      </div>
  </header>
  
  <div class="container">
      <div class="controls">
          <input type="text" class="search-box" id="searchBox" placeholder="T√¨m ki·∫øm h·ªôi tho·∫°i...">
          
          <div class="topic-tabs">
              <div class="topic-tab active" data-topic="">üìã T·∫•t c·∫£</div>
              <div class="topic-tab" data-topic="business">üíº Business</div>
              <div class="topic-tab" data-topic="travel">‚úàÔ∏è Travel</div>
              <div class="topic-tab" data-topic="daily">üè† Daily Life</div>
              <div class="topic-tab" data-topic="education">üéì Education</div>
          </div>
          
          <div class="filters">
              <select id="levelFilter">
                  <option value="">T·∫•t c·∫£ c·∫•p ƒë·ªô</option>
                  <option value="beginner">Beginner</option>
                  <option value="intermediate">Intermediate</option>
                  <option value="advanced">Advanced</option>
              </select>
              
              <button class="add-btn" onclick="openModal()">+ Th√™m h·ªôi tho·∫°i m·ªõi</button>
          </div>
      </div>
      
      <div id="conversationsContainer">
          <!-- Business Section -->
          <div class="topic-section" data-topic="business">
              <div class="topic-header">
                  <div class="topic-title">üíº Business</div>
                  <div class="topic-count" id="business-count">0 h·ªôi tho·∫°i</div>
              </div>
              <div class="conversations-list" id="business-list">
                  <!-- Sample conversation -->
                  <div class="conversation-card" data-topic="business" data-level="intermediate">
                      <div class="card-header">
                          <h3 class="card-title">Meeting Introduction</h3>
                          <span class="level-badge level-intermediate">Intermediate</span>
                      </div>
                      <div class="characters">
                          <div class="character character-a">üë®‚Äçüíº John (Manager)</div>
                          <div class="character character-b">üë©‚Äçüíº Sarah (New Employee)</div>
                      </div>
                      <div class="dialogue-container">
                          <div class="dialogue-line dialogue-a">
                              <div class="speaker-name speaker-a">üë®‚Äçüíº John:</div>
                              <div class="dialogue-content">
                                  <div class="lang-text english-text">Good morning everyone. Let's begin today's meeting.</div>
                                  <div class="lang-text vietnamese-text">Ch√†o bu·ªïi s√°ng m·ªçi ng∆∞·ªùi. H√£y b·∫Øt ƒë·∫ßu cu·ªôc h·ªçp h√¥m nay.</div>
                              </div>
                          </div>
                          <div class="dialogue-line dialogue-b">
                              <div class="speaker-name speaker-b">üë©‚Äçüíº Sarah:</div>
                              <div class="dialogue-content">
                                  <div class="lang-text english-text">Thank you for welcoming me to the team.</div>
                                  <div class="lang-text vietnamese-text">C·∫£m ∆°n v√¨ ƒë√£ ch√†o ƒë√≥n t√¥i v√†o nh√≥m.</div>
                              </div>
                          </div>
                          <div class="dialogue-line dialogue-a">
                              <div class="speaker-name speaker-a">üë®‚Äçüíº John:</div>
                              <div class="dialogue-content">
                                  <div class="lang-text english-text">We're excited to have you here. Let's discuss today's agenda.</div>
                                  <div class="lang-text vietnamese-text">Ch√∫ng t√¥i r·∫•t vui khi c√≥ b·∫°n ·ªü ƒë√¢y. H√£y th·∫£o lu·∫≠n v·ªÅ ch∆∞∆°ng tr√¨nh h√¥m nay.</div>
                              </div>
                          </div>
                          <div class="dialogue-line dialogue-b">
                              <div class="speaker-name speaker-b">üë©‚Äçüíº Sarah:</div>
                              <div class="dialogue-content">
                                  <div class="lang-text english-text">I'm looking forward to contributing to the team's success.</div>
                                  <div class="lang-text vietnamese-text">T√¥i mong mu·ªën ƒë∆∞·ª£c ƒë√≥ng g√≥p v√†o th√†nh c√¥ng c·ªßa nh√≥m.</div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          
          <!-- Travel Section -->
          <div class="topic-section" data-topic="travel">
              <div class="topic-header">
                  <div class="topic-title">‚úàÔ∏è Travel</div>
                  <div class="topic-count" id="travel-count">0 h·ªôi tho·∫°i</div>
              </div>
              <div class="conversations-list" id="travel-list">
                  <!-- Sample conversation -->
                  <div class="conversation-card" data-topic="travel" data-level="beginner">
                      <div class="card-header">
                          <h3 class="card-title">At the Airport</h3>
                          <span class="level-badge level-beginner">Beginner</span>
                      </div>
                      <div class="characters">
                          <div class="character character-a">üß≥ Tourist</div>
                          <div class="character character-b">üë©‚Äç‚úàÔ∏è Staff</div>
                      </div>
                      <div class="dialogue-container">
                          <div class="dialogue-line dialogue-a">
                              <div class="speaker-name speaker-a">üß≥ Tourist:</div>
                              <div class="dialogue-content">
                                  <div class="lang-text english-text">Excuse me, where is the check-in counter for Vietnam Airlines?</div>
                                  <div class="lang-text vietnamese-text">Xin l·ªói, qu·∫ßy check-in c·ªßa Vietnam Airlines ·ªü ƒë√¢u?</div>
                              </div>
                          </div>
                          <div class="dialogue-line dialogue-b">
                              <div class="speaker-name speaker-b">üë©‚Äç‚úàÔ∏è Staff:</div>
                              <div class="dialogue-content">
                                  <div class="lang-text english-text">It's on the second floor, counter number 15-20.</div>
                                  <div class="lang-text vietnamese-text">·ªû t·∫ßng hai, qu·∫ßy s·ªë 15-20 ·∫°.</div>
                              </div>
                          </div>
                          <div class="dialogue-line dialogue-a">
                              <div class="speaker-name speaker-a">üß≥ Tourist:</div>
                              <div class="dialogue-content">
                                  <div class="lang-text english-text">Thank you very much!</div>
                                  <div class="lang-text vietnamese-text">C·∫£m ∆°n b·∫°n r·∫•t nhi·ªÅu!</div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          
          <!-- Daily Life Section -->
          <div class="topic-section" data-topic="daily">
              <div class="topic-header">
                  <div class="topic-title">üè† Daily Life</div>
                  <div class="topic-count" id="daily-count">0 h·ªôi tho·∫°i</div>
              </div>
              <div class="conversations-list" id="daily-list">
                  <div class="empty-state">Ch∆∞a c√≥ h·ªôi tho·∫°i n√†o trong ch·ªß ƒë·ªÅ n√†y</div>
              </div>
          </div>
          
          <!-- Education Section -->
          <div class="topic-section" data-topic="education">
              <div class="topic-header">
                  <div class="topic-title">üéì Education</div>
                  <div class="topic-count" id="education-count">0 h·ªôi tho·∫°i</div>
              </div>
              <div class="conversations-list" id="education-list">
                  <div class="empty-state">Ch∆∞a c√≥ h·ªôi tho·∫°i n√†o trong ch·ªß ƒë·ªÅ n√†y</div>
              </div>
          </div>
      </div>
  </div>
  
  <!-- Modal for adding new conversation -->
  <div id="addModal" class="modal">
      <div class="modal-content">
          <span class="close-btn" onclick="closeModal()">&times;</span>
          <h2>Th√™m h·ªôi tho·∫°i m·ªõi</h2>
          
          <form id="conversationForm">
              <div class="form-group">
                  <label>Ti√™u ƒë·ªÅ:</label>
                  <input type="text" id="title" required>
              </div>
              
              <div class="form-group">
                  <label>Ch·ªß ƒë·ªÅ:</label>
                  <select id="topic" required>
                      <option value="business">Business</option>
                      <option value="travel">Travel</option>
                      <option value="daily">Daily Life</option>
                      <option value="education">Education</option>
                  </select>
              </div>
              
              <div class="form-group">
                  <label>C·∫•p ƒë·ªô:</label>
                  <select id="level" required>
                      <option value="beginner">Beginner</option>
                      <option value="intermediate">Intermediate</option>
                      <option value="advanced">Advanced</option>
                  </select>
              </div>
              
              <div class="form-group">
                  <label>T√™n nh√¢n v·∫≠t:</label>
                  <div class="character-names">
                      <input type="text" id="characterA" placeholder="Nh√¢n v·∫≠t A" required>
                      <input type="text" id="characterB" placeholder="Nh√¢n v·∫≠t B" required>
                  </div>
              </div>
              
              <div class="form-group">
                  <label>ƒêo·∫°n h·ªôi tho·∫°i:</label>
                  <button type="button" class="add-dialogue-btn" onclick="addDialogueLine()">+ Th√™m c√¢u tho·∫°i</button>
                  <div class="dialogue-inputs" id="dialogueInputs">
                      <!-- Dialogue lines will be added here -->
                  </div>
              </div>
              
              <button type="submit" class="submit-btn">L∆∞u h·ªôi tho·∫°i</button>
          </form>
      </div>
  </div>
  
  <script>
      // Store conversations in localStorage
      let conversations = JSON.parse(localStorage.getItem('conversations')) || [];
      let dialogueCounter = 0;
      let currentTopicFilter = '';
      
      // Initialize
      document.addEventListener('DOMContentLoaded', function() {
          updateTopicCounts();
          loadSavedConversations();
      });
      
      // Topic tab functionality
      document.querySelectorAll('.topic-tab').forEach(tab => {
          tab.addEventListener('click', function() {
              // Remove active class from all tabs
              document.querySelectorAll('.topic-tab').forEach(t => t.classList.remove('active'));
              // Add active class to clicked tab
              this.classList.add('active');
              
              currentTopicFilter = this.dataset.topic;
              filterConversations();
          });
      });
      
      // Search functionality
      document.getElementById('searchBox').addEventListener('input', filterConversations);
      document.getElementById('levelFilter').addEventListener('change', filterConversations);
      
      function filterConversations() {
          const searchTerm = document.getElementById('searchBox').value.toLowerCase();
          const levelFilter = document.getElementById('levelFilter').value;
          
          // Show/hide topic sections
          document.querySelectorAll('.topic-section').forEach(section => {
              const sectionTopic = section.dataset.topic;
              
              if (currentTopicFilter === '' || currentTopicFilter === sectionTopic) {
                  section.style.display = 'block';
                  
                  // Filter conversations within this section
                  const cards = section.querySelectorAll('.conversation-card');
                  let visibleCount = 0;
                  
                  cards.forEach(card => {
                      const title = card.querySelector('.card-title').textContent.toLowerCase();
                      const content = card.textContent.toLowerCase();
                      const level = card.dataset.level;
                      
                      const matchesSearch = content.includes(searchTerm);
                      const matchesLevel = !levelFilter || level === levelFilter;
                      
                      if (matchesSearch && matchesLevel) {
                          card.style.display = 'block';
                          visibleCount++;
                      } else {
                          card.style.display = 'none';
                      }
                  });
                  
                  // Show/hide empty state
                  const emptyState = section.querySelector('.empty-state');
                  const conversationsList = section.querySelector('.conversations-list');
                  
                  if (visibleCount === 0 && !emptyState) {
                      conversationsList.innerHTML = '<div class="empty-state">Kh√¥ng t√¨m th·∫•y h·ªôi tho·∫°i n√†o</div>';
                  } else if (visibleCount > 0 && emptyState) {
                      emptyState.style.display = 'none';
                  }
              } else {
                  section.style.display = 'none';
              }
          });
      }
      
      function updateTopicCounts() {
          const topics = ['business', 'travel', 'daily', 'education'];
          
          topics.forEach(topic => {
              const count = document.querySelectorAll(`[data-topic="${topic}"] .conversation-card`).length;
              const countElement = document.getElementById(`${topic}-count`);
              if (countElement) {
                  countElement.textContent = `${count} h·ªôi tho·∫°i`;
              }
          });
      }
      
      // Modal functions
      function openModal() {
          document.getElementById('addModal').style.display = 'block';
          // Add initial dialogue line
          if (document.getElementById('dialogueInputs').children.length === 0) {
              addDialogueLine();
          }
      }
      
      function closeModal() {
          document.getElementById('addModal').style.display = 'none';
          document.getElementById('conversationForm').reset();
          document.getElementById('dialogueInputs').innerHTML = '';
          dialogueCounter = 0;
      }
      
      // Add dialogue line input
      function addDialogueLine() {
          const container = document.getElementById('dialogueInputs');
          const lineDiv = document.createElement('div');
          lineDiv.className = 'dialogue-input';
          lineDiv.innerHTML = `
              <button type="button" class="remove-dialogue-btn" onclick="removeDialogueLine(this)">X√≥a</button>
              <select class="speaker-select" name="speaker_${dialogueCounter}">
                  <option value="A">Nh√¢n v·∫≠t A</option>
                  <option value="B">Nh√¢n v·∫≠t B</option>
              </select>
              <div class="dialogue-texts">
                  <textarea name="english_${dialogueCounter}" placeholder="N·ªôi dung ti·∫øng Anh" required></textarea>
                  <textarea name="vietnamese_${dialogueCounter}" placeholder="N·ªôi dung ti·∫øng Vi·ªát" required></textarea>
              </div>
          `;
          container.appendChild(lineDiv);
          dialogueCounter++;
      }
      
      function removeDialogueLine(button) {
          button.parentElement.remove();
      }
      
      // Form submission
      document.getElementById('conversationForm').addEventListener('submit', function(e) {
          e.preventDefault();
          
          const title = document.getElementById('title').value;
          const topic = document.getElementById('topic').value;
          const level = document.getElementById('level').value;
          const characterA = document.getElementById('characterA').value;
          const characterB = document.getElementById('characterB').value;
          
          // Collect dialogue lines
          const dialogues = [];
          const dialogueInputs = document.querySelectorAll('.dialogue-input');
          
          dialogueInputs.forEach((input, index) => {
              const speaker = input.querySelector('select').value;
              const english = input.querySelector('textarea[name^="english"]').value;
              const vietnamese = input.querySelector('textarea[name^="vietnamese"]').value;
              
              dialogues.push({
                  speaker: speaker,
                  english: english,
                  vietnamese: vietnamese
              });
          });
          
          const newConversation = {
              id: Date.now(),
              title: title,
              topic: topic,
              level: level,
              characterA: characterA,
              characterB: characterB,
              dialogues: dialogues
          };
          
          conversations.push(newConversation);
          localStorage.setItem('conversations', JSON.stringify(conversations));
          
          addConversationCard(newConversation);
          updateTopicCounts();
          closeModal();
          
          alert('ƒê√£ th√™m h·ªôi tho·∫°i th√†nh c√¥ng!');
      });
      
      // Add conversation card to appropriate topic section
      function addConversationCard(conversation) {
          const topicList = document.getElementById(`${conversation.topic}-list`);
          
          // Remove empty state if exists
          const emptyState = topicList.querySelector('.empty-state');
          if (emptyState) {
              emptyState.remove();
          }
          
          const card = document.createElement('div');
          card.className = 'conversation-card';
          card.dataset.topic = conversation.topic;
          card.dataset.level = conversation.level;
          
          const levelLabels = {
              beginner: 'Beginner',
              intermediate: 'Intermediate',
              advanced: 'Advanced'
          };
          
          // Generate dialogue HTML
          let dialogueHTML = '';
          conversation.dialogues.forEach((dialogue, index) => {
              const isCharacterA = dialogue.speaker === 'A';
              const characterName = isCharacterA ? conversation.characterA : conversation.characterB;
              const dialogueClass = isCharacterA ? 'dialogue-a' : 'dialogue-b';
              const speakerClass = isCharacterA ? 'speaker-a' : 'speaker-b';
              const icon = isCharacterA ? 'üë§' : 'üë§';
              
              dialogueHTML += `
                  <div class="dialogue-line ${dialogueClass}">
                      <div class="speaker-name ${speakerClass}">${icon} ${characterName}:</div>
                      <div class="dialogue-content">
                          <div class="lang-text english-text">${dialogue.english}</div>
